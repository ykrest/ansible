- name: nginx install
  package: name=nginx state=present

- name: nginx start
  service: nginx
    name: nginx
    state: started
    enabled: yes

- name: nginx config
  template:
    src: nginx.conf.j2
    dest: "/etc/nginx/nginx.conf"
    owner: root
    group: root
    mode: 0644
  notify: 
    - reload nginx

- name: basic website config
  template:
    src: testweb.conf.j2
    dest: "/etc/nginx/conf.d/testweb.conf"
    owner: root
    group: root
    mode: 0644
  notify:
    - reload nginx

- name: default web page
  template:
    src: index.html.j2
    dest: "/var/www/html"
    owner: root
    group: root
    mode: 0644
